<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="Author" content="Balla Mihaly">

    <title>DGModalDialog</title>

    <meta http-equiv="Content-Language" content="en-US">
    <link rel="stylesheet" type="text/css" href="../StyleLibrary/Style.css">
    <script type="text/javascript" src="../StyleLibrary/Java.js"></script>
    <script type="text/javascript" src="../StyleLibrary/TOCscript.js"></script>
    <script type="text/javascript">
      LEVELSTR = "../";
      ICONPATH = LEVELSTR + "StyleLibrary/Images/Treeview/";
    </script>
    <script type="text/javascript" src="../StyleLibrary/TOC.js"></script>
    <script type="text/javascript" src="../StyleLibrary/tree_tpl.js"></script>
    <script type="text/javascript" src="../StyleLibrary/tree.js"></script>
    <meta name="Microsoft.Help.F1" content="DGHtmlLibrary/DGModalDialog.html">
    <xml>
      <MSHelp:Attr Name = "DocSet" Value = "Graphisoft"/>
    </xml>
</head>
<body>
<div id="docBegin">
  <p id="graphisoft_title">&nbsp;<span>Graphisoft&reg;</span></p>
  <p class="hdr"><span class="TitleMain">Dialog&nbsp;Manager</span><span class="TitleVersion">Version: 2.0</span></p>
</div>
<div id="content" class="inset">
          <script type="text/javascript">
            insertTOC ();
          </script>


    <h1>DGModalDialog</h1>

    <p>Displays a <a href="ModalDialogs.html">modal dialog</a>.</p>
    <pre class="syntax">
    <strong>short DGModalDialog</strong> (
      <strong>GSResModule</strong>           <em>dialResModule</em>,
      <strong>short</strong>                 <em>resId</em>,
      <strong>GSResModule</strong>           <em>dialIconResModule</em>,
      <strong>const <a href="CallbackFunctions.html">DGDialCallBack</a></strong>  <em>dCallBack</em>,
      <strong><a href="DGUserData.html">DGUserData</a></strong>            <em>userData</em>
    );
</pre>

    <h4>Parameters</h4>

    <dl>
        <dt><em>dialResModule</em></dt>

        <dd>The resource module the <tt>GDLG</tt> resource is in.</dd>

        <dt><em>resId</em></dt>

        <dd><tt>GDLG</tt> resource identifier of the dialog, or zero if you want to create a modal dialog from program code.</dd>

        <dt><em>dialIconResModule</em></dt>

        <dd>The resource module the icons for this dialog are in.</dd>

        <dd>&nbsp;</dd>

        <dt><em>dCallBack</em></dt>

        <dd>Constant pointer to the dialog callback procedure, with the following declaration:</dd>

        <dd>&nbsp;</dd>

        <dd><tt><strong>typedef&nbsp;short&nbsp;</strong>(*DGDialCallBack) (<br>
        &nbsp;&nbsp;<strong>short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><em>message</em>,<br>
        &nbsp;&nbsp;<strong>short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><em>dialId</em>,<br>
        &nbsp;&nbsp;<strong>short&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><em>itemId</em>,<br>
        &nbsp;&nbsp;<strong><a href="DGUserData.html">DGUserData</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong><em>userData</em>,<br>
        &nbsp;&nbsp;<strong><a href="DGMessageData.html">DGMessageData</a>&nbsp;&nbsp;</strong><em>msgData</em><br>
        );</tt></dd>

        <dd>&nbsp;</dd>

        <dt><em>userData</em></dt>

        <dd>The user-specified data of the dialog.</dd>
    </dl>

    <h4>Return Values</h4>

    <dl>
        <dd>
            <table border="0">
                <tr valign="top">
                    <th align="left">Value</th>

                    <th align="left">Meaning</th>
                </tr>

                <tr valign="top">
                    <td>0</td>

                    <td>The function parameters are incorrect or the dialog cannot be created.</td>
                </tr>

                <tr valign="top">
                    <td>A positive value</td>

                    <td>A positive value was returned by the dialog callback function. This is usually the 1-based dialog item index of the clicked button.</td>
                </tr>

                <tr valign="top">
                    <td><tt>DG_ABORT</tt></td>

                    <td>The modal dialog was aborted by <a href="DGAbortModalDialog.html">DGAbortModalDialog</a>.</td>
                </tr>

                <tr valign="top">
                    <td colspan="2"><img src="../DGImageLibrary/WinLogo.png" alt="Windows logo"><b>&nbsp;Windows only:</b></td>
                </tr>

                <tr valign="top">
                    <td><tt>DG_CLOSEBOX</tt></td>

                    <td>The dialog was closed by its close box.</td>
                </tr>
            </table>
        </dd>
    </dl>

    <h4>Remarks</h4>

    <p><b>DGModalDialog</b> returns only if the modal dialog is closed by the user or from program code.</p>

    <p>The application should store the dialog ID when handling the <a href="DG_MSG_INIT.html"><tt>DG_MSG_INIT</tt></a> message in the dialog callback function and use this value in following calls of DG functions instead of a fixed resource ID. Basically there are three situations when this is a must:</p>

    <ul>
        <li>You call <b>DGModalDialog</b> with zero <em>resId</em> parameter to create a new dialog from program code.</li>

        <li>You want to create more instances of a dialog (based on the same resource).</li>

        <li>You want to open more dialogs of the same type that are defined in different modules with the same resource ID.</li>
    </ul>

    <p>In such cases DG creates new (negative) unique dialog IDs at the second and subsequent <b>DGModalDialog</b> calls to solve the resource collision. It is strongly recommended to get used to this method even if the application consists of one module and every dialog is opened only once.</p>

    <p>The user data block given by the <em>userData</em> parameter is passed to the dialog callback function with every DG message. The application can store dialog-specific information in this data block and cast its pointer to <strong><tt>DGUserData</tt></strong>.</p>

    <p><b>DGModalDialog</b> returns only if the modal dialog is closed. The user usually closes a modal dialog by clicking the OK or the Cancel button. The dialog callback function receives a <tt>DG_MSG_CLICK</tt> message with <tt>DG_OK</tt> or <tt>DG_CANCEL</tt> as the <em>item</em> parameter. On Windows, if the user clicks the close box in the caption the <em>item</em> parameter is <tt>DG_CANCEL</tt> (or <tt>DG_OK</tt> if there is no Cancel button in the dialog). The dialog is indeed closed only if the callback function returns a non-zero value (typically <tt>DG_OK</tt> or <tt>DG_CANCEL</tt>) for the <tt>DG_MSG_CLICK</tt> message. The application can use this return value to determine whether the modal dialog completed its task successfully or was canceled by the user.</p>

    <p>Note that a modal dialog can also be exited from program code by calling the <b>DGAbortModalDialog</b> function or by returning a non-zero value for a <a href="DG_MSG_NULL.html"><tt>DG_MSG_NULL</tt></a> message in the dialog callback function. If <b>DGAbortModalDialog</b> is called, the callback function receives a <tt>DG_MSG_CLOSE</tt> message with <tt>DG_ABORT</tt> as the <em>item</em> parameter and <b>DGModalDialog</b> returns <tt>DG_ABORT</tt>.</p>

    <p>If <em>resId</em> parameter is zero, an empty, non-growable dialog is created. When handling the <tt>DG_MSG_INIT</tt> message in the dialog callback function, you can size this dialog to the desired dimensions, set its title and fill it with dialog items by using the <a href="DGAppendDialogItem.html">DGAppendDialogItem</a> function.</p>

    <h4>Requirements</h4>

    <dl>
        <dd><b>Version:</b> DG 1.0.0 or later</dd>

        <dd><b>Header:</b> DG.h</dd>

        <dd><b>Import Library:</b> DG.lib [WIN]</dd>

        <dd><b>Module:</b> DGLib [MAC], DG.dll [WIN]</dd>
    </dl>

    <h4>See Also</h4>

    <p><a href="FunctionList_id.html">DG Functions</a>, <a href="ModalDialogs.html">Modal Dialogs</a>. <a href="DGAbortModalDialog.html">DGAbortModalDialog</a><br>
    <a href="DGAppendDialogItem.html">DGAppendDialogItem</a>, <a href="DGBlankModalDialog.html">DGBlankModalDialog</a>, <a href="DG_MSG_CLICK.html"><tt>DG_MSG_CLICK</tt></a>, <a href="DG_MSG_INIT.html"><tt>DG_MSG_INIT</tt></a>, <a href="DG_MSG_NULL.html"><tt>DG_MSG_NULL</tt></a>, <a href="CallbackFunctions.html">Callback functions</a></p>

    

</div>
<div id="footer">
    <p class="hdr1">      <span class="Credits">Copyright &copy; 2022 - GRAPHISOFT SE. All rights reserved worldwide. <br />Built on February 3, 2003<br/>
      </span>
    </p>
    <p id="toplink"><a href="#docBegin"><img src="../StyleLibrary/Images/top.gif" alt="top" width="31" height="14" id="toTopImg" /></a></p>
</div>
</body>
</html>
