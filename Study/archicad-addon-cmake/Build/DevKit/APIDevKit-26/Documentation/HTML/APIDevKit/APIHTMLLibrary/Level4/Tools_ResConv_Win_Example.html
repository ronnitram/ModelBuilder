<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
    <title>Graphisoft Resource Compiler</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta http-equiv="Content-Language" content="en-US">
    <meta name="Author" content="GRAPHISOFT SE">
    <link rel="stylesheet" type="text/css" href="../../StyleLibrary/Style.css">
    <script type="text/javascript" src="../../StyleLibrary/Java.js"></script>
    <script type="text/javascript" src="../../StyleLibrary/TOCscript.js"></script>
    <script type="text/javascript">
      LEVELSTR = "../../";
      ICONPATH = LEVELSTR + "StyleLibrary/Images/Treeview/";
    </script>
    <script type="text/javascript" src="../../StyleLibrary/TOC.js"></script>
    <script type="text/javascript" src="../../StyleLibrary/tree_tpl.js"></script>
    <script type="text/javascript" src="../../StyleLibrary/tree.js"></script>
    <meta name="Microsoft.Help.F1" content="APIHTMLLibrary/Level4/Tools_ResConv_Win_Example.html">
    <xml>
      <MSHelp:Attr Name = "DocSet" Value = "Graphisoft"/>
    </xml>
</head>
<body>
<div id="docBegin">
  <p id="graphisoft_title">&nbsp;<span>Graphisoft&reg;</span></p>
  <p class="hdr"><span class="TitleMain">API&nbsp;Development&nbsp;Kit</span><span class="TitleVersion">Version: 26</span></p>
</div>
<div id="content" class="inset">
          <script type="text/javascript">
            insertTOC ();
          </script>


    <h1>Graphisoft Resource Compiler Example on Windows</h1><br>

    <p>In this example, we will create a native binary Windows resource for an Example dialog, which contains few icons, a picture, text items and two buttons:</p>

    <blockquote>
        <img src="../../APIImageLibrary/WinExampleDlg.png" alt="Example Dialog ScreenShot">
    </blockquote>

    <p>The resource files corresponding to this dialog are:</p>

		<ul>
			<li><a href="RINT/ExampleGRC.grc"><tt>ExampleGRC.grc</tt></a>: this <tt>GRC</tt> file contains the localizable resources (<tt>'GDLG'</tt> and <tt>'DLGH'</tt>)</li>

			<li><a href="RFIX/ExampleFixGRC.grc"><tt>ExampleFixGRC.grc</tt></a>: this <tt>GRC</tt> file contains the non-localizable resources (<tt>'GICN'</tt>)</li>

			<li><a href="RFIX.win/Example.rc2"><tt>Example.rc2</tt></a>: Windows resource descriptor file to join the localizable and non-localizable resources together</li>
		</ul>

    <p>The result will be a Windows resource file (.res), which contains the native image resources and the dialog resources:</p>

    <blockquote>
        <img src="../../APIImageLibrary/WinExampleRes.png" alt="Example.res Opened in Visual Studio 2015 ScreenShot">
    </blockquote>

    <p>Note that the Resource Compiler can handle only one input file per one run.</p>

    <p>We compile the resources in three steps. Later, every step is thoroughly explained:</p>

    <ol>

        <li>Step: Compile the non-localizable <tt>GRC</tt> file with <tt>ResConv</tt> tool<br>
            <pre>ResConv.exe -m r -t W -q utf8 1252 -d WINDOWS -p .\RFIX\Images -i .\RFIX\ExampleFixGRC.grc -o .\RO\ExampleFixGRC.grc.rc2</pre>
        </li>

        <li>Step: Compile the localizable <tt>GRC</tt> file with <tt>ResConv</tt> tool<br>
            <pre>ResConv.exe -m r -t W -q utf8 1252 -d WINDOWS -i .\RINT\ExampleGRC.grc -o .\RO\ExampleGRC.grc.rc2</pre>
        </li>

        <li>Step: Compile .rc2 file using Windows Resource Compiler (<tt>RC</tt>)<br>
            <pre>rc.exe -I .\Src -I .\RO -Fo.\RO\ExampleGRC.res .\RFIX.win\Example.rc2</pre>
        </li>

    </ol>

    <p>Every command should be typed as a single line into the command line.</p>

    <ol>

        <li>Step

            <ul>
                <li>Input: <a href="RFIX/ExampleFixGRC.grc"><tt>ExampleFixGRC.grc</tt></a>, images (<a href="RFIX/Images/10000.png"><tt>10000.png</tt></a>, <a href="RFIX/Images/WallTool_18x18.svg"><tt>WallTool_18x18.svg</tt></a>, <a href="RFIX/Images/DoorTool_18x18.svg"><tt>DoorTool_18x18.svg</tt></a>, <a href="RFIX/Images/WindowTool_18x18.svg"><tt>WindowTool_18x18.svg</tt></a>, <a href="RFIX/Images/ObjectTool_18x18.svg"><tt>ObjectTool_18x18.svg</tt></a>, <a href="RFIX/Images/TWEditable_16x16.svg"><tt>TWEditable_16x16.svg</tt></a>, <a href="RFIX/Images/TWLocked_16x16.svg"><tt>TWLocked_16x16.svg</tt></a>)</li>

                <li>Output: <a href="RO/ExampleFixGRC.grc.rc2"><tt>ExampleFixGRC.grc.rc2</tt></a>, native icon files (<tt>10000.ico</tt>, <tt>WallTool.ico</tt>, <tt>DoorTool.ico</tt>, <tt>WindowTool.ico</tt>, <tt>ObjectTool.ico</tt>, <tt>TWEditable.ico</tt>, <tt>TWLocked.ico</tt>)</li>
            </ul>

            <p>In this step the native Windows <tt>.rc2</tt> resource descriptor file is translated from the non-localizable <tt>GRC</tt> file and image conversions take place. From the information in the <tt>GRC</tt> file and the image sources, <tt>ResConv</tt> creates native Windows resource files (<tt>.ico</tt>, <tt>.cur</tt>, etc.).</p>
            <p><img border="0" src="../../APIImageLibrary/20.png" alt="API version 20" width="19" height="12">&nbsp;The possible source image formats of an icon resource are PNG and SVG. For further information, read <a href="How_to_Compile_Icon_Resources.html">how to compile icon resources</a>.</p>

            <p>The first parameter (<tt>-m r</tt>) specifies the converter operation mode of the ResConv (<tt>-m r</tt> is the default, so you may omit that). The second option is important, we instruct the compiler to convert to Windows platform, so it knows that it should generate native resources and a native resource descriptor file, as mentioned the paragraph above. We could add the output codepage and some #define's also. The <tt>-p</tt> parameter defines the path to the source images. And finally the last two parameters specify the input and the output files.</p>
        </li>

        <li>Step

            <ul>
                <li>Input: <a href="RINT/ExampleGRC.grc"><tt>ExampleGRC.grc</tt></a></li>

                <li>Output: <a href="RO/ExampleGRC.grc.rc2"><tt>ExampleGRC.grc.rc2</tt></a></li>
            </ul>

            <p>In this step the native Windows <tt>.rc2</tt> resource descriptor file is translated from the localizable <tt>GRC</tt> file.</p>

            <p>Parameters are the same as described in the first step, but here no need to define the path of the images.</p>
        </li>

        <li>Step

            <ul>
                <li>Input: <a href="RFIX.win/Example.rc2"><tt>Example.rc2</tt></a></li>

                <li>Output: <a href="RO/Example.res"><tt>Example.res</tt></a></li>
            </ul>

            <p>This step is for completeness. We should further compile the output of the previous steps into a native Windows .res file with the Microsoft Resource Compiler (<tt>rc.exe</tt>). <a href="RFIX.win/Example.rc2"><tt>Example.rc2</tt></a> joins the output of the previous steps together.</p>

            <p>For the explanation of the parameters, see the details for <tt>RC</tt> in <tt>MSDN</tt>.</p>
        </li>

    </ol>

    <p>We are ready!</p>

    <p>We can integrate these steps into a batch file. The various file names, directories and defined parameters can be parameters for this batch file too. The process can be also be summarized in a <tt>.msc</tt> Windows makefile, and then can be executed by <tt>NMAKE</tt>. nmake will automatically watch for the changes of the files, and will only take the necessary steps to build the resources.</p>

    


</div>
<div id="footer">
    <p class="hdr1">      <span class="Credits">Copyright &copy; 2022 - GRAPHISOFT SE. All rights reserved worldwide. <br />Modified on February 15, 2016<br/>
      </span>
    </p>
    <p id="toplink"><a href="#docBegin"><img src="../../StyleLibrary/Images/top.gif" alt="top" width="31" height="14" id="toTopImg" /></a></p>
</div>
</body>
</html>
