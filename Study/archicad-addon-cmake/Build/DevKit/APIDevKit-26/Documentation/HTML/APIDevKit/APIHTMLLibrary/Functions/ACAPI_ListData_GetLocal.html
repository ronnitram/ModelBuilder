<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
    <title>ACAPI_ListData_GetLocal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="Author" content="@@@_author_@@@">

    <meta http-equiv="Content-Language" content="en-US">
    <link rel="stylesheet" type="text/css" href="../../StyleLibrary/Style.css">
    <script type="text/javascript" src="../../StyleLibrary/Java.js"></script>
    <script type="text/javascript" src="../../StyleLibrary/TOCscript.js"></script>
    <script type="text/javascript">
      LEVELSTR = "../../";
      ICONPATH = LEVELSTR + "StyleLibrary/Images/Treeview/";
    </script>
    <script type="text/javascript" src="../../StyleLibrary/TOC.js"></script>
    <script type="text/javascript" src="../../StyleLibrary/tree_tpl.js"></script>
    <script type="text/javascript" src="../../StyleLibrary/tree.js"></script>
    <meta name="Microsoft.Help.F1" content="APIHTMLLibrary/Functions/ACAPI_ListData_GetLocal.html">
    <xml>
      <MSHelp:Attr Name = "DocSet" Value = "Graphisoft"/>
    </xml>
</head>
<body>
<div id="docBegin">
  <p id="graphisoft_title">&nbsp;<span>Graphisoft&reg;</span></p>
  <p class="hdr"><span class="TitleMain">API&nbsp;Development&nbsp;Kit</span><span class="TitleVersion">Version: 26</span></p>
</div>
<div id="content" class="inset">
          <script type="text/javascript">
            insertTOC ();
          </script>


    <h1>ACAPI_ListData_GetLocal</h1>

    <p>Retrieves the data of a local listing component.</p>
    <pre class="syntax">
    <strong>GSErrCode  ACAPI_ListData_GetLocal</strong> (
        <strong>Int32</strong>                    <em>libIndex</em>,
        <strong>const <a href="../Structures/API_Elem_Head.html">API_Elem_Head</a>*</strong>     <em>elemHead</em>,
        <strong><a href="../Structures/API_ListData.html">API_ListData</a>*</strong>            <em>listdata</em>
    );
</pre>

    <p>&nbsp;</p>

    <h4>Parameters</h4>

    <dl>
        <dt><em>libIndex</em></dt>

        <dd>[in] Index of the library part.</dd>

        <dt><em>elemHead</em>&nbsp;<img border="0" src="../../APIImageLibrary/17.png" alt="Changed in API 17" width="19" height="12"></dt>

        <dd>[in] Element of the placed object instance (see remarks).</dd>

        <dt><em>listdata</em></dt>

        <dd>[in/out] Parameters of the listdata. The type of the listdata must be passed in the <code>typeID</code> field in the listdata header. The index in the library part must be passed in the <code>index</code> field in the listdata header. The other fields of the structure are filled in automatically.</dd>
    </dl>

    <p>&nbsp;</p>

    <h4>Return Values</h4>

    <dl>
        <dt><code>NoError</code></dt>

        <dd>The function has completed with success.</dd>

        <dt><code>APIERR_BADPARS</code></dt>

        <dd>Invalid <code>libIndex</code> was passed.</dd>

        <dt><code>APIERR_BADID</code></dt>

        <dd>Invalid listdata type was passed.</dd>
    </dl>

    <p>For other common API errors see the <a href="../Level2/Error_Codes.html">API Errors</a> document.</p>

    <p>&nbsp;</p>

    <h4>Remarks</h4>

    <p>This function is used to get a local component or descriptor in the library part defined by <code>libIndex</code> and <code>typeID</code>, the <code>index</code> field of the listdata header. The information of a given listdata is returned in the fields of the listdata. If the given listdata is in the listing database, use the <a href="ACAPI_ListData_Get.html">ACAPI_ListData_Get</a> function instead.</p>

    <p>When getting the local listdata, the applicable fields should be filled.</p>

    <blockquote>
        <table>
            <tr>
                <th>
                    <p align="left">API_ListData_Head</p>
                </th>

                <th></th>
            </tr>

            <tr>
                <td>
                    <p><code>index</code></p>
                </td>

                <td>
                    <p>required</p>
                </td>
            </tr>

            <tr>
                <td>
                    <p><code>typeID</code> (only for API_Obsolete_ComponentID and API_DescriptorID)</p>
                </td>

                <td>
                    <p>required</p>
                </td>
            </tr>
        </table>

        <table>
            <tr>
                <td>
                    <p><code>libIndex</code></p>
                </td>

                <td>
                    <p>required</p>
                </td>
            </tr>
        </table>
    </blockquote>

    <p>If you are retrieving a descriptor, do not forget to dispose of the name handle when you're finished.</p>

    <p><img border="0" src="../../APIImageLibrary/11.png" alt="Changed in API 11" width="19" height="12">&nbsp; If the listing result depends on the current settings of the library part parameters (which is possible when the component or descriptor definitions in the property script of the object refer to GDL parameters of the object), you might need to get the correct data to be listed for a placed element. In this case you need to pass the appropriate <code>elemTypeID</code> and <code>elemIndex</code> parameters. Otherwise these values should be <code>API_ZombieElemID</code> and <code>0</code> respectively.</p>

    <p>&nbsp;</p>

    <h4>Example</h4>

    <blockquote>
        <pre><code>
API_LibPart   libPart;
API_ListData  listdata;
API_Elem_Head head;
Int32         libIndex;
GSErrCode     err;

BNZeroMemory (&amp;libPart, sizeof (API_LibPart));
BNZeroMemory (&amp;head, sizeof (API_Elem_Head));

libPart.typeID = APILib_PropertyID;
GS::ucscpy (libPart.docu_UName, L("Test property"));

err = ACAPI_LibPart_Search (&amp;libPart, false);
delete libPart.location;

if (err == NoError &amp;&amp; libPart.index != 0) {
    libIndex = libPart.index;

    BNZeroMemory (&amp;listdata, sizeof (API_ListData));
    listdata.header.typeID = API_Obsolete_ComponentID;
    listdata.header.index  = 1;

    err = ACAPI_ListData_GetLocal (libIndex, &amp;head, &amp;listdata);
}
</code></pre>
    </blockquote>

    <p>&nbsp;</p>

    <h4>Requirements</h4>

    <dl>
        <dd><b>Version:</b> API 2.1 or later</dd>

        <dd><b>Header:</b> ACAPinc.h</dd>
    </dl>

    <p>&nbsp;</p>

    <h4>See Also</h4>

    <p><a href="../Structures/API_ListData.html">API_ListData</a>,<br>
    <a href="ACAPI_ListData_Get.html">ACAPI_ListData_Get</a>,<br>
    <a href="../Level3/Listing_Manager_id.html">Listing Manager</a>, <a href="API_Functions.html">API Functions</a></p>

    

</div>
<div id="footer">
    <p class="hdr1">      <span class="Credits">Copyright &copy; 2022 - GRAPHISOFT SE. All rights reserved worldwide. <br />Modified on April 2, 2020<br/>
      </span>
    </p>
    <p id="toplink"><a href="#docBegin"><img src="../../StyleLibrary/Images/top.gif" alt="top" width="31" height="14" id="toTopImg" /></a></p>
</div>
</body>
</html>
